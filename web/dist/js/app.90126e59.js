(function(t){function e(e){for(var n,a,l=e[0],d=e[1],s=e[2],u=0,h=[];u<l.length;u++)a=l[u],i[a]&&h.push(i[a][0]),i[a]=0;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(t[n]=d[n]);c&&c(e);while(h.length)h.shift()();return r.push.apply(r,s||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],n=!0,l=1;l<o.length;l++){var d=o[l];0!==i[d]&&(n=!1)}n&&(r.splice(e--,1),t=a(a.s=o[0]))}return t}var n={},i={app:0},r=[];function a(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=n,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(o,n,function(e){return t[e]}.bind(null,n));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/manage/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=e,l=l.slice();for(var s=0;s<l.length;s++)e(l[s]);var c=d;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var n=o("64a9"),i=o.n(n);i.a},"3d97":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("f751"),o("097d");var n=o("2b0e"),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("b-alert",{attrs:{show:t.alert.visible,variant:t.alert.type}},[t._v("\n    "+t._s(t.alert.msg)+"\n  ")]),t._l(t.shortlinks,function(t){return o("Entry",{key:t.id,attrs:{id:t.id,rootlink:t.root_link,shortlink:t.short_link,created:t.created,accesses:t.accesses,edited:t.edited}})}),t.addButtonVisible?o("a",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-add",modifiers:{"modal-add":!0}}],staticClass:"add text-white"},[t._v("+")]):t._e(),o("b-modal",{staticClass:"text-dark",attrs:{id:"modal-login",title:"Login"},on:{hide:function(e){return t.login(t.loginModal.tbToken)}}},[o("b-alert",{attrs:{show:t.loginModal.showWrongCredentials,variant:"danger"}},[t._v("\n      Wrong login credentials.\n    ")]),o("b-form-group",{attrs:{id:"groupLoginToken",label:"Login token:","label-for":"tbLoginToken"}},[o("b-form-input",{ref:"tbShortLink",attrs:{id:"tbShortLink",type:"password",placeholder:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$bvModal.hide("modal-login")}},model:{value:t.loginModal.tbToken,callback:function(e){t.$set(t.loginModal,"tbToken",e)},expression:"loginModal.tbToken"}})],1)],1),o("b-modal",{staticClass:"text-dark",attrs:{id:"modal-add",title:"Add Short Link"},on:{ok:function(e){return t.createShortLink(t.addModal.tbRootLink,t.addModal.tbShortLink)}}},[o("b-form-group",{attrs:{id:"groupShortLink",label:"Short link","label-for":"tbShortLink",description:"Leave empty for random short link identifier."}},[o("b-form-input",{attrs:{id:"tbShortLink",type:"text",placeholder:""},model:{value:t.addModal.tbShortLink,callback:function(e){t.$set(t.addModal,"tbShortLink",e)},expression:"addModal.tbShortLink"}})],1),o("b-form-group",{attrs:{id:"groupRootLink",label:"Root link","label-for":"tbRootLink",description:"URI the link will redirect to."}},[o("b-form-input",{attrs:{id:"tbRootLink",type:"text",required:"",placeholder:""},model:{value:t.addModal.tbRootLink,callback:function(e){t.$set(t.addModal,"tbRootLink",e)},expression:"addModal.tbRootLink"}})],1)],1),o("b-modal",{staticClass:"text-dark",attrs:{id:"modal-edit",title:"Edit Short Link"},on:{ok:function(e){return t.modifyShortLink(t.editModal.id,t.editModal.tbRootLink,t.editModal.tbShortLink)}}},[o("b-form-group",{attrs:{id:"groupShortLink",label:"Short link","label-for":"tbShortLink",description:"The short link identifier."}},[o("b-form-input",{attrs:{id:"tbShortLink",type:"text",placeholder:""},model:{value:t.editModal.tbShortLink,callback:function(e){t.$set(t.editModal,"tbShortLink",e)},expression:"editModal.tbShortLink"}})],1),o("b-form-group",{attrs:{id:"groupRootLink",label:"Root link","label-for":"tbRootLink",description:"URI the link will redirect to."}},[o("b-form-input",{attrs:{id:"tbRootLink",type:"text",required:"",placeholder:""},model:{value:t.editModal.tbRootLink,callback:function(e){t.$set(t.editModal,"tbRootLink",e)},expression:"editModal.tbRootLink"}})],1)],1),o("b-modal",{staticClass:"text-dark",attrs:{id:"modal-delete","hide-footer":"",title:"Delete Short Link"}},[o("p",[t._v("Do you really want to delete the following short link?")]),o("table",{staticClass:"mod-delete"},[o("tr",[o("th",[t._v("ID")]),o("td",[t._v(t._s(t.deleteModal.id))])]),o("tr",[o("th",[t._v("Short Link")]),o("td",[t._v(t._s(t.deleteModal.shortLink))])]),o("tr",[o("th",[t._v("Root URI")]),o("td",[t._v(t._s(t.deleteModal.rootLink))])])]),o("div",{staticClass:"text-right"},[o("b-button",{staticClass:"mt-3 mr-2",attrs:{variant:"secondary"},on:{click:function(e){return t.$bvModal.hide("modal-delete")}}},[t._v("Cancel")]),o("b-button",{staticClass:"mt-3",attrs:{variant:"danger"},on:{click:function(e){return t.deleteShortLink(t.deleteModal.id)}}},[t._v("Delete")])],1)])],2)},r=[],a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-container",{staticClass:"entry mb-3 p-2 rounded text-white",attrs:{fluid:""}},[o("b-row",[o("b-col",[o("h5",{staticClass:"mb-0"},[t._v(t._s(t.shortlink))]),o("div",[o("a",{staticClass:"root mt-1",attrs:{href:t.rootlink,target:"_blank"}},[t._v(t._s(t.shorten(t.rootlink,80)))])]),o("b-badge",{attrs:{variant:"secondary"}},[t._v("#"+t._s(t.id))]),o("b-badge",{attrs:{variant:"primary ml-2"}},[t._v(t._s(t.accesses)+" Clicks")])],1),o("b-col",{staticClass:"text-right",attrs:{cols:"2"}},[o("b-button",{staticClass:"mr-2",attrs:{variant:"warning"},on:{click:t.copy}},[t._v("🔗")]),o("b-button",{staticClass:"mr-2",attrs:{variant:"info"},on:{click:t.edit}},[t._v("✏️")]),o("b-button",{attrs:{variant:"danger"},on:{click:t.del}},[t._v("🗑️")])],1)],1)],1)},l=[],d=(o("c5f6"),o("f9e3"),o("2dd8"),new n["default"]),s={log:function(t){console.log(t)},catchRestError:function(t){if(t.response){var e=t.response;e.request;d.$emit("main-error","Request failed with status code ".concat(e.status," and message: ").concat(JSON.stringify(e.data)))}else t.request?d.$emit("main-error","Request failed with no response from the back end."):d.$emit("main-error","Request failed: ".concat(t.message))},copySLToClipboard:function(t){return new Promise(function(e,o){var n="hidden-clipboard-area",i=document.getElementById(n);if(!i){var r=document.createElement("textarea");r.id=n,document.querySelector("body").appendChild(r),i=document.getElementById(n)}i.value=window.location.origin+"/"+t,i.select();var a=document.execCommand("copy");a?e():o("Could not copy shortlink to clipboard.")})}},c={name:"Entry",props:{id:Number,rootlink:String,shortlink:String,created:String,accesses:Number,edited:String},methods:{shorten:function(t,e){return e-=3,t.length>e&&(t=t.substr(0,e)+"..."),t},edit:function(){d.$emit("main-edit",{id:this.id,shortlink:this.shortlink,rootlink:this.rootlink})},del:function(){d.$emit("main-delete",{id:this.id,shortlink:this.shortlink,rootlink:this.rootlink})},copy:function(){s.copySLToClipboard(this.shortlink).then(function(){return d.$emit("main-info","Short link copied to clip board.")}).catch(function(t){return d.$emit("main-error",t)})}}},u=c,h=(o("ee35"),o("2877")),f=Object(h["a"])(u,a,l,!1,null,"55b5e8e3",null),k=f.exports,b=o("bc3a"),m=o.n(b),p="",v={};m.a.defaults.withCredentials=!0;var g={getShortlinks:function(){return m()({method:"GET",url:p+"/api/shortlinks",headers:v})},login:function(t){return m()({method:"POST",url:p+"/api/login",headers:{Authorization:"Basic "+t}})},createShortLink:function(t,e){return m()({method:"POST",url:p+"/api/shortlinks",headers:v,data:{root_link:t,short_link:e}})},modifyShortLink:function(t,e,o){return m()({method:"POST",url:p+"/api/shortlinks/"+t,headers:v,data:{root_link:e,short_link:o}})},deleteShortLink:function(t){return m()({method:"DELETE",url:p+"/api/shortlinks/"+t,headers:v})}},L={name:"app",components:{Entry:k},data:function(){return{shortlinks:[],alert:{msg:"",type:"danger",visible:!1},addModal:{tbShortLink:null,tbRootLink:null},editModal:{tbShortLink:null,tbRootLink:null,id:null},deleteModal:{shortLink:null,rootLink:null,id:null},loginModal:{tbToken:null,showWrongCredentials:!1},addButtonVisible:!1}},methods:{refetchData:function(){var t=this;g.getShortlinks().then(function(e){t.shortlinks=e.data.results}).catch(function(e){e.response&&401==e.response.status?t.$bvModal.show("modal-login"):s.catchRestError(e)})},login:function(t){var e=this,o=function(t){e.loginModal.tbToken="",t.response&&401==t.response.status&&(e.loginModal.showWrongCredentials=!0),setTimeout(function(){return e.$bvModal.show("modal-login")},10)};!t||t.length<1?o({}):g.login(t).catch(function(t){return o(t)}).then(function(t){return e.refetchData()})},test:function(t){console.log(t)},createShortLink:function(t,e){var o=this;g.createShortLink(t,e).then(function(t){o.refetchData(),d.$emit("main-info","Successfully created short link ".concat(t.data.short_link," (ID: ").concat(t.data.id,")"))}).catch(s.catchRestError)},modifyShortLink:function(t,e,o){var n=this;g.modifyShortLink(t,e,o).then(function(t){n.refetchData(),d.$emit("main-info","Successfully updated short link ".concat(t.data.short_link," (ID: ").concat(t.data.id,")"))}).catch(s.catchRestError)},deleteShortLink:function(t){var e=this;g.deleteShortLink(t).then(function(t){e.refetchData(),d.$emit("main-info","Successfully deleted short link (ID was ".concat(t.data.id,").")),e.$bvModal.hide("modal-delete")}).catch(s.catchRestError)}},created:function(){var t=this;d.$on("main-error",function(e){t.alert.visible=!0,t.alert.type="danger",t.alert.msg=e,setTimeout(function(){t.alert.visible=!1},5e3)}),d.$on("main-info",function(e){t.alert.visible=!0,t.alert.type="success",t.alert.msg=e,setTimeout(function(){t.alert.visible=!1},5e3)}),d.$on("main-edit",function(e){t.editModal.tbShortLink=e.shortlink,t.editModal.tbRootLink=e.rootlink,t.editModal.id=e.id,t.$bvModal.show("modal-edit")}),d.$on("main-delete",function(e){t.deleteModal.shortLink=e.shortlink,t.deleteModal.rootLink=e.rootlink,t.deleteModal.id=e.id,t.$bvModal.show("modal-delete")}),this.refetchData()}},S=L,y=(o("034f"),Object(h["a"])(S,i,r,!1,null,null,null)),M=y.exports,_=o("9f7b"),w=o.n(_);n["default"].config.productionTip=!1,n["default"].use(w.a),new n["default"]({render:function(t){return t(M)}}).$mount("#app")},"64a9":function(t,e,o){},ee35:function(t,e,o){"use strict";var n=o("3d97"),i=o.n(n);i.a}});
//# sourceMappingURL=app.90126e59.js.map